{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "forEach Action",
  "type": "object",
  "properties": {
    "forEach": {
      "type": "object",
      "properties": {
        "items": { "type": "string", "description": "Template expression for items array" },
        "item": { "type": "string", "description": "Variable name for current item" },
        "actions": { "$ref": "../schemas.json#/definitions/actionsList" }
      },
      "x-examples": [
        {
          "items": "{{ existingRouteLegs.selectedItems }}",
          "item": "routeLeg",
          "actions": [
            {
              "mutation": {
                "command": "mutation CreateRouteRouteLegMutation($input: CreateRouteRouteLegInput!) { createRouteRouteLeg(input: $input) { routeRouteLeg { routeLegId } } }",
                "variables": { "input": { "routeLegId": "{{ number routeLeg.routeLegId }}" } }
              }
            },
            { "refresh": "routeLegsGrid" }
          ]
        }
      ]
    }
  },
  "additionalProperties": false
}
